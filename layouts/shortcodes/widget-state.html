{{ $state := .Get "state" }}

{{ if not ($.Page.Scratch.Get "jupyterwidgetsloaded") }}
  {{ $.Page.Scratch.Set "jupyterwidgetsloaded" 1 }}
<!-- Load require.js. Delete this if your page already loads require.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" crossorigin="anonymous"></script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>
{{ end }}

<script type="application/vnd.jupyter.widget-state+json">
{{- $state | readFile | safeHTML -}}
</script>